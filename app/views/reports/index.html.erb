<div class="col-md-7 col-md-offset-3 main">
  <% provide(:title, "Reports")%>
  <center><h1>Reports</h1></center>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>From</th>
        <th>To</th>
        <th>Report type</th>
        <th>Employees</th>
        <th>Components</th>
        <th>Business</th>
        <th>Projects</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @reports.each do |report| %>
        <tr>
          <td><%= report.name %></td>
          <td><%= report.from_date %></td>
          <td><%= report.to_date %></td>
          <td><% report.settings['report_types'].each do |value| %>
            <%= ReportType.find(value).report_type %><br>
          <% end %></td>
          <td><% report.settings['employee_ids'].each do |value| %>
            <%= Employee.find(value).email %><br>
          <% end %></td>
          <td><% report.settings['component_ids'].each do |value| %>
            <%= Component.find(value).name %><br>
          <% end %></td>
          <td><% report.settings['business_ids'].each do |value| %>
            <%= Business.find(value).name %><br>
          <% end %></td>
          <td><% report.settings['project_ids'].each do |value| %>
            <%= Project.find(value).prefix %><br>
          <% end %></td>
          <td><%= link_to 'Show', report %></td>
          <td><%= link_to 'Edit', edit_report_path(report) %></td>
          <td><%= link_to 'Destroy', report, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<%= link_to 'New Report', new_report_path %>
